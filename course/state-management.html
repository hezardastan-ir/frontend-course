<!DOCTYPE html>
<html lang="fa-IR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>مدیریت state | دوره آموزشی web front-end هزاردستان</title>
    <meta name="description" content="">
    <link rel="icon" href="/frontend-course/favicon.ico">
    
    <link rel="preload" href="/frontend-course/assets/css/0.styles.0176f8b0.css" as="style"><link rel="preload" href="/frontend-course/assets/js/app.73261c6b.js" as="script"><link rel="preload" href="/frontend-course/assets/js/2.3a14c9a1.js" as="script"><link rel="preload" href="/frontend-course/assets/js/18.db9316ff.js" as="script"><link rel="prefetch" href="/frontend-course/assets/js/10.06ea9231.js"><link rel="prefetch" href="/frontend-course/assets/js/11.83a20b42.js"><link rel="prefetch" href="/frontend-course/assets/js/12.5eaecadd.js"><link rel="prefetch" href="/frontend-course/assets/js/13.acbc68c1.js"><link rel="prefetch" href="/frontend-course/assets/js/14.d20d7a22.js"><link rel="prefetch" href="/frontend-course/assets/js/15.1c4d491d.js"><link rel="prefetch" href="/frontend-course/assets/js/16.9f0a204d.js"><link rel="prefetch" href="/frontend-course/assets/js/17.f98307b1.js"><link rel="prefetch" href="/frontend-course/assets/js/19.c08f4cfb.js"><link rel="prefetch" href="/frontend-course/assets/js/20.1a617463.js"><link rel="prefetch" href="/frontend-course/assets/js/3.1d8c01c6.js"><link rel="prefetch" href="/frontend-course/assets/js/4.e07740c0.js"><link rel="prefetch" href="/frontend-course/assets/js/5.79dd99aa.js"><link rel="prefetch" href="/frontend-course/assets/js/6.7da44328.js"><link rel="prefetch" href="/frontend-course/assets/js/7.761e5f47.js"><link rel="prefetch" href="/frontend-course/assets/js/8.33cf0a9c.js"><link rel="prefetch" href="/frontend-course/assets/js/9.58129798.js">
    <link rel="stylesheet" href="/frontend-course/assets/css/0.styles.0176f8b0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend-course/" class="home-link router-link-active"><img src="/frontend-course/logo.png" alt="دوره آموزشی web front-end هزاردستان" class="logo"> <span class="site-name can-hide">دوره آموزشی web front-end هزاردستان</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://jobs.hezardastan.ir" target="_blank" rel="noopener noreferrer" class="nav-link external">
  فرصت‌های شغلی
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/hezardastan-ir/frontend-course" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://jobs.hezardastan.ir" target="_blank" rel="noopener noreferrer" class="nav-link external">
  فرصت‌های شغلی
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/hezardastan-ir/frontend-course" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/frontend-course/course/html-intro.html" class="sidebar-link">آشنایی با HTML</a></li><li><a href="/frontend-course/course/css-intro.html" class="sidebar-link">آشنایی با CSS</a></li><li><a href="/frontend-course/course/layout.html" class="sidebar-link">صفحه‌آرایی (Layout)</a></li><li><a href="/frontend-course/course/javascript-concepts.html" class="sidebar-link">مفاهیم JavaScript</a></li><li><a href="/frontend-course/course/http-intro.html" class="sidebar-link">آشنایی با HTTP</a></li><li><a href="/frontend-course/course/dom-ajax-json-intro.html" class="sidebar-link">آشنایی با DOM و AJAX و JSON</a></li><li><a href="/frontend-course/course/version-control.html" class="sidebar-link">کنترل نسخه</a></li><li><a href="/frontend-course/course/es6-and-tools.html" class="sidebar-link">خلاصه پروژه و نصب node</a></li><li><a href="/frontend-course/course/basic-react-and-layout.html" class="sidebar-link">نمایش لیست پست‌ها و layout</a></li><li><a href="/frontend-course/course/advanced-react.html" class="sidebar-link">صفحه پست و کامنت‌ها</a></li><li><a href="/frontend-course/course/authentication-and-authorization.html" class="sidebar-link">بررسی هویت کاربر و ارسال پست</a></li><li><a href="/frontend-course/course/state-management.html" class="active sidebar-link">مدیریت state</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-course/course/state-management.html#redux-thunk" class="sidebar-link">redux-thunk</a></li><li class="sidebar-sub-header"><a href="/frontend-course/course/state-management.html#امکان-جستجو-در-پست‌ها" class="sidebar-link">امکان جستجو در پست‌ها</a></li></ul></li><li><a href="/frontend-course/course/ux.html" class="sidebar-link">آشنایی با اصول طراحی و UX</a></li><li><a href="/frontend-course/course/methodology.html" class="sidebar-link">متدولوژی</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="مدیریت-state"><a href="#مدیریت-state" class="header-anchor">#</a> مدیریت state</h1> <p>یکی از مسائل مهم در تولید اپلیکیشن‌های وب، مدیریت داده‌ها و state هست. توی پروژه کوچیک میشه این state رو داخل کامپوننت‌ها ذخیره کرد، اما وقتی پروژه بزرگ میشه این راه حل به مرور کارایی خودش رو از دست میده و ادامه‌ی پروژه به این روش با افزایش نمایی پیچیدگی روبرو خواهد شد. برای مثال وقتی یک state خاص لازمه که توی چندین کامپوننت مختلف استفاده بشه، مجبوریم اون رو در اولین والد مشترک اون کامپوننت‌ها قرار بدیم و بعداً از طریق props به کامپوننت‌های فرزند بفرستیم. و اگه قرار باشه کامپوننت‌ها نیاز به تغییر این state داشته باشن باز مجبوریم یه سری handler به پایین بفرستیم. اگه این کامپوننت‌ها در عمق زیادی قرار داشته باشن باید از هر کامپوننت به کامپوننت فرزند بعدی ارسال بشن که همونطور که گفته شد وقتی پروژه بزرگ باشه این مساله خیلی پیچیدگی و اضافه‌کاری زیادی توی کد به وجود میاره.</p> <p>یک راه حل معروف برای این مشکل الگوی معماری Flux هست که توسط کتابخونه‌هایی مثل Redux پیاده‌سازی شده. راجع به معماری فلاکس این <a href="https://facebook.github.io/flux/docs/in-depth-overview.html" target="_blank" rel="noopener noreferrer">لینک<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> رو بخون.همچنین راجع به Redux این لینک‌ها رو بخون:</p> <ul><li><a href="https://medium.com/mofed/react-redux-architecture-overview-7b3e52004b6e" target="_blank" rel="noopener noreferrer">React + Redux: Architecture Overview<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.amberbit.com/blog/2016/12/6/redux-overview/" target="_blank" rel="noopener noreferrer">Redux Overview<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer">https://redux.js.org/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>البته غیر از redux کتابخونه‌های دیگه هم مثل <a href="https://mobx.js.org/" target="_blank" rel="noopener noreferrer">MobX<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> و <a href="https://rematch.gitbooks.io/rematch" target="_blank" rel="noopener noreferrer">Rematch<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> نوشته شدن که اولی مفهومی کاملا متفاوت داره و بر اساس الگوی observable state نوشته شده و دومی یک سطح انتزاع روی redux هست که باعث کاهش boilerplate میشه. فعلا جهت یادگیری بهتر توصیه میشه صرفا با redux کار کنی تا مفاهیم رو از اول و به شکل اصولی یاد بگیری بعداً میتونی سراغ این کتابخونه‌های دیگه هم بری.</p> <h2 id="redux-thunk"><a href="#redux-thunk" class="header-anchor">#</a> redux-thunk</h2> <p>با توجه به اینکه معماری Flux با فرض synchronous بودن همه فراخوانی‌ها طراحی شده، اگر قرار باشه actionها بصورت asynchronous اجرا بشن، نیاز به کتابخونه <a href="https://github.com/reduxjs/redux-thunk" target="_blank" rel="noopener noreferrer">redux-thunk<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> هم خواهی داشت. برای توضیحات بیشتر این <a href="https://medium.com/@stowball/a-dummys-guide-to-redux-and-thunk-in-react-d8904a7005d3" target="_blank" rel="noopener noreferrer">لینک<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> رو ببین.</p> <p>در ادامه‌ی پروژه کتابخونه‌های redux ، react-redux و redux-thunk رو به پروژه اضافه کن، و پیاده‌سازی‌های فعلی رو اگر جایی لازم میدونی state رو به redux منتقل کن.</p> <p>مثلاً موارد زیر میتونن به redux منتقل بشن:</p> <ul><li><p>لیست پست‌ها و متنشون میتونن داخل استور باشن، هر بار که صفحه لیست باز میشه این لیست داخل استور آپدیت بشه اما تا زمانی که آپدیت نشده لیست قدیمی نشون داده بشه. دفعه اول که لیست خالیه loading نشون بده.</p></li> <li><p>در صفحه‌ی پست اگر لیست پست‌ها از پیش گرفته شده بود، از دیتای ذخیره شده در store برای نمایش اون پست استفاده بشه، در غیر این صورت مشابه وضعیت قبلی ریکوئست بزنه و دیتای پست رو بگیره و نمایش بده.</p></li></ul> <h2 id="امکان-جستجو-در-پست‌ها"><a href="#امکان-جستجو-در-پست‌ها" class="header-anchor">#</a> امکان جستجو در پست‌ها</h2> <p>در داخل وبلاگی که نوشتی، سمت چپ بالای لینک‌های بلاگ یه باکس جدید با عنوان جستجو اضافه کن و داخلش یه فیلد جهت جستجوی بلاگ‌ها بذار. کاربر وقتی مقدار جدیدی وارد کرد و enter رو زد باید به یه صفحه‌ی search که توی روتر تعریف میکنی منتقل بشه و پارامتر q به مقدار جستجو شده ست بشه.</p> <p>در صفحه جستجو باید یه request به آدرس زیر زده بشه که لیست بلاگ‌های محتوی اون رشته رو برمیگردونه:</p> <p><code>localhost:3000/posts?q=[term]</code></p> <p>اونوقت لیست این نتایج رو در ستون سمت راست (جایی که لیست پست‌های بلاگ نمایش داده می‌شدند) نشون بده و در داخل عنوان و متن پست‌های پیدا شده، هر جا رشته‌ی جستجو شده وجود داشت اون رو بصورت <code>هایلایت زرد رنگ</code> نشون بده. در ضمن داخل باکس جستجو و درست زیر فیلد مربوط به جستجو لیستی از آخرین ۵ رشته‌ی جستجو شده رو نشون بده که با کلیک کردن روی اونها دوباره جستجو بشن و صفحه لیست نتایج آپدیت و نمایش داده بشه.</p> <p>برای پیاده‌سازی این امکانات نیاز داری که هر بار مقداری جستجو میشه اون رو داخل redux ذخیره کنی و همیشه لیستی از ۵ عبارت جستجو شده آخر رو هم همیشه داشته باشی. عبارت جستجو شده‌ی فعلی موقع باز شدن صفحه search آپدیت میشه (یه action باید dispatch بشه) و بعدا مقدار اون داخل کامپوننت لیست بلاگ‌ها باید استفاده بشه تا مقدار جستجو شده رو همه جا بتونی هایلایت کنی.</p> <p>در نظر داشته باش کاربر ممکنه لینک صفحه جستجو رو همراه با پارامتر q داخل آدرس‌بار تایپ کنه، در این صورت غیر از اینکه جستجو بر اساس اون انجام میشه، لیست آخرین ۵ عبارت جستجو شده هم باید آپدیت بشه.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">آخرین بروزرسانی:</span> <span class="time">۱۳۹۹/۹/۱۸،‏ ۱۹:۴۱:۲۴</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend-course/course/authentication-and-authorization.html" class="prev">بررسی هویت کاربر و ارسال پست</a></span> <span class="next"><a href="/frontend-course/course/ux.html">آشنایی با اصول طراحی و UX</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/frontend-course/assets/js/app.73261c6b.js" defer></script><script src="/frontend-course/assets/js/2.3a14c9a1.js" defer></script><script src="/frontend-course/assets/js/18.db9316ff.js" defer></script>
  </body>
</html>

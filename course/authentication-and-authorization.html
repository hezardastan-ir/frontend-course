<!DOCTYPE html>
<html lang="fa-IR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>بررسی هویت کاربر و ارسال پست | دوره آموزشی web front-end هزاردستان</title>
    <meta name="description" content="">
    <link rel="icon" href="/frontend-course/favicon.ico">
    
    <link rel="preload" href="/frontend-course/assets/css/0.styles.0176f8b0.css" as="style"><link rel="preload" href="/frontend-course/assets/js/app.73261c6b.js" as="script"><link rel="preload" href="/frontend-course/assets/js/2.3a14c9a1.js" as="script"><link rel="preload" href="/frontend-course/assets/js/12.5eaecadd.js" as="script"><link rel="prefetch" href="/frontend-course/assets/js/10.06ea9231.js"><link rel="prefetch" href="/frontend-course/assets/js/11.83a20b42.js"><link rel="prefetch" href="/frontend-course/assets/js/13.acbc68c1.js"><link rel="prefetch" href="/frontend-course/assets/js/14.d20d7a22.js"><link rel="prefetch" href="/frontend-course/assets/js/15.1c4d491d.js"><link rel="prefetch" href="/frontend-course/assets/js/16.9f0a204d.js"><link rel="prefetch" href="/frontend-course/assets/js/17.f98307b1.js"><link rel="prefetch" href="/frontend-course/assets/js/18.db9316ff.js"><link rel="prefetch" href="/frontend-course/assets/js/19.c08f4cfb.js"><link rel="prefetch" href="/frontend-course/assets/js/20.1a617463.js"><link rel="prefetch" href="/frontend-course/assets/js/3.1d8c01c6.js"><link rel="prefetch" href="/frontend-course/assets/js/4.e07740c0.js"><link rel="prefetch" href="/frontend-course/assets/js/5.79dd99aa.js"><link rel="prefetch" href="/frontend-course/assets/js/6.7da44328.js"><link rel="prefetch" href="/frontend-course/assets/js/7.761e5f47.js"><link rel="prefetch" href="/frontend-course/assets/js/8.33cf0a9c.js"><link rel="prefetch" href="/frontend-course/assets/js/9.58129798.js">
    <link rel="stylesheet" href="/frontend-course/assets/css/0.styles.0176f8b0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/frontend-course/" class="home-link router-link-active"><img src="/frontend-course/logo.png" alt="دوره آموزشی web front-end هزاردستان" class="logo"> <span class="site-name can-hide">دوره آموزشی web front-end هزاردستان</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://jobs.hezardastan.ir" target="_blank" rel="noopener noreferrer" class="nav-link external">
  فرصت‌های شغلی
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/hezardastan-ir/frontend-course" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://jobs.hezardastan.ir" target="_blank" rel="noopener noreferrer" class="nav-link external">
  فرصت‌های شغلی
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/hezardastan-ir/frontend-course" target="_blank" rel="noopener noreferrer" class="repo-link">
    github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/frontend-course/course/html-intro.html" class="sidebar-link">آشنایی با HTML</a></li><li><a href="/frontend-course/course/css-intro.html" class="sidebar-link">آشنایی با CSS</a></li><li><a href="/frontend-course/course/layout.html" class="sidebar-link">صفحه‌آرایی (Layout)</a></li><li><a href="/frontend-course/course/javascript-concepts.html" class="sidebar-link">مفاهیم JavaScript</a></li><li><a href="/frontend-course/course/http-intro.html" class="sidebar-link">آشنایی با HTTP</a></li><li><a href="/frontend-course/course/dom-ajax-json-intro.html" class="sidebar-link">آشنایی با DOM و AJAX و JSON</a></li><li><a href="/frontend-course/course/version-control.html" class="sidebar-link">کنترل نسخه</a></li><li><a href="/frontend-course/course/es6-and-tools.html" class="sidebar-link">خلاصه پروژه و نصب node</a></li><li><a href="/frontend-course/course/basic-react-and-layout.html" class="sidebar-link">نمایش لیست پست‌ها و layout</a></li><li><a href="/frontend-course/course/advanced-react.html" class="sidebar-link">صفحه پست و کامنت‌ها</a></li><li><a href="/frontend-course/course/authentication-and-authorization.html" class="active sidebar-link">بررسی هویت کاربر و ارسال پست</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend-course/course/authentication-and-authorization.html#مقدمه" class="sidebar-link">مقدمه</a></li><li class="sidebar-sub-header"><a href="/frontend-course/course/authentication-and-authorization.html#صفحه-signup" class="sidebar-link">صفحه Signup</a></li><li class="sidebar-sub-header"><a href="/frontend-course/course/authentication-and-authorization.html#صفحه-login" class="sidebar-link">صفحه login</a></li><li class="sidebar-sub-header"><a href="/frontend-course/course/authentication-and-authorization.html#افزودن-پست" class="sidebar-link">افزودن پست</a></li></ul></li><li><a href="/frontend-course/course/state-management.html" class="sidebar-link">مدیریت state</a></li><li><a href="/frontend-course/course/ux.html" class="sidebar-link">آشنایی با اصول طراحی و UX</a></li><li><a href="/frontend-course/course/methodology.html" class="sidebar-link">متدولوژی</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="بررسی-هویت-کاربر-و-ارسال-پست"><a href="#بررسی-هویت-کاربر-و-ارسال-پست" class="header-anchor">#</a> بررسی هویت کاربر و ارسال پست</h1> <h2 id="مقدمه"><a href="#مقدمه" class="header-anchor">#</a> مقدمه</h2> <p>هر برنامه محتوا محوری، شامل یک سری داده هست که به هر کدوم یک مدل گفته میشه. برای هر مدل، چهار عملیات ساخت(Create)، خواندن(Read)، بروز رسانی(Update) و حذف(Delete) تعریف میشه که به اختصار CRUD گفته میشه.</p> <p>تا اینجای کار، فقط به خواندن مدل‌هامون (پست و کامنت) پرداختیم. تو این قسمت، می‌خوایم به ساخت یک پست بپردازیم. بدین منظور، باید به کاربران سایتمون اجازه ساخت اکانت بدیم تا هویتشون رو برای ایجاد پست جدید (یا باقی عملیات ویرایش داده‌ای) تشخیص بدیم.</p> <h2 id="صفحه-signup"><a href="#صفحه-signup" class="header-anchor">#</a> صفحه Signup</h2> <p>این صفحه یک فرم داره که شامل چهار فیلد زیر هست:</p> <ul><li>Title</li> <li>Username</li> <li>Password</li> <li>Confirm password</li> <li>Email</li></ul> <p>حین تایپ کردن کاربر توی فیلد username باید بهش بفهمونیم که آیا می‌تونه از username استفاده کنه یا نه. با تایپ کردن username ریکوئست می‌زنیم به بک‌اند و اگر استفاده از اون استرینگ ممکن بود یا نبود، بهش فیدبک مناسب میدیم. برای این ریکوئست از api زیر استفاده کن:</p> <p><code>localhost:3000/users/[username]</code></p> <p>فیلد‌های password و confirm password باید یکسان وارد بشن: از لحظه‌ای که کاربر شروع کرد به وارد کردن confirm password تا لحظه‌ای که مقدار این فیلد با فیلد password یکی نیست، باید فیدبک مناسب بهش بدیم و وقتی که یکی بود هم، همین‌طور.</p> <p>فیلد email باید valid باشه و باید فیدبک مناسب به کاربر داده‌بشه.</p> <p>پس از این که همه فیلد ها وارد شدند، دکمه Signup پایین صفحه فعال میشه و در صورت کلیک شدن، ریکوئستی شامل username، password و email و title به سرور ارسال می‌شه و اگه همه‌ چی اوکی باشه، کاربر لاگین میشه و به صفحه home هدایت میشه. برای ایجاد کاربر ریکوئست Post به آدرس زیر بفرست:</p> <p><code>localhost:3000/users</code></p> <p>قبل از شروع پیاده سازی، مستندات سایت React در مورد <a href="https://reactjs.org/docs/forms.html" target="_blank" rel="noopener noreferrer">فرم‌ها<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>، کار با <a href="https://reactjs.org/docs/handling-events.html" target="_blank" rel="noopener noreferrer">رخداد<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ها و <a href="https://reactjs.org/docs/uncontrolled-components.html" target="_blank" rel="noopener noreferrer">کمپوننت‌های کنترل‌نشده<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> رو بخون.</p> <p>برای این صفحه، Route جدیدی تعریف کن که شامل header صفحات قبلی، و این فرم باشه.</p> <h2 id="صفحه-login"><a href="#صفحه-login" class="header-anchor">#</a> صفحه login</h2> <p>شامل فیلد‌های username و password هست، و در صورتی که اطلاعات وارد شده توسط سرور تایید بشن، کاربر باید لاگین بیشه و به صفحه خانه برگرده. برای بررسی درستی اطلاعات کاربر و گرفتن token، به api زیر ریکوئست post بزن و username و password رو توی یه json بفرست:</p> <p><code>localhost:3000/sessions</code></p> <h3 id="شناسایی-کاربران-پس-از-ورود-یا-ثبت‌نام"><a href="#شناسایی-کاربران-پس-از-ورود-یا-ثبت‌نام" class="header-anchor">#</a> شناسایی کاربران پس از ورود یا ثبت‌نام</h3> <p>همون‌طور که می‌دونید، پروتکل http، توجهی به وضعیت کلاینت نداره و به اصطلاح stateless هست. بدین معنی که اگر در ریکوئست http اول، هویت کاربر تصدیق بشه، در ریکوئست دوم، اطلاعاتی از ریکوئست قبلی در دست نیست و سرور نمی‌دونه که داره با کدوم کلاینت صحبت می‌کنه. برای حل این مشکل، راه‌حل های زیادی وجود داره که از جمله اونها میشه به basic authentication، استفاده از cookie ها، استفاده از token ها، و … اشاره کرد. این <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication" target="_blank" rel="noopener noreferrer">لینک<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> رو برای اطلاعات بیشتر راجع به authentication بخون. یکی از روش های رایج در Single Page Application ها، استفاده از jwt token هست که یک‌بار توسط سرور ساخته‌میشه و از اون پس هر بار کاربر اون رو به همراه بقیه محتوای requestاش به سرور ارسال می‌کنه. با این روش، سرور با هر ریکوئستی می‌تونه دوباره هویت کاربر رو بررسی کنه. برای یادگیری جزییات بیشتر این روش می‌تونی <a href="https://jwt.io/introduction/" target="_blank" rel="noopener noreferrer">اینجا<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> رو بخونی.</p> <p>Token ایجاد شده توسط سرور، به کلاینت ارسال میشه و کلاینت اون رو داخل localStorage ذخیره می‌کنه. ریکوئست‌های بعدی شامل http-headerای هستند که به این شکل هست:</p> <p><code>Authorization: Bearer &lt;token&gt;</code></p> <h2 id="افزودن-پست"><a href="#افزودن-پست" class="header-anchor">#</a> افزودن پست</h2> <p>در صفحه home، برای کاربری که لاگین کرده، قسمتی ایجاد کن که شامل یک باکس خالی برای نوشتن عنوان پست، و یک باکس بزرگ‌تر برای نوشتن متن پست داشته‌باشه.</p> <p>سایر فیچر‌های این قسمت، به شکل زیر هست:</p> <ul><li><p>در صورتی که ارتفاع متن نوشته‌شده توسط کاربر، از ارتفاع تعبیه شده برای این فیلد بیشتر باشه، نباید به اون فیلد اسکرول اضافه بشه، بلکه باید طول فیلد هم افزایش پیدا کنه.</p></li> <li><p>در صورتی که کاربر ctrl + enter رو می‌زنه، پست ارسال میشه به سرور (دکمه Send new post هم همین کار رو می‌کنه)</p></li> <li><p>اطلاعاتی که به سرور می‌فرستی شامل موارد زیر هست:</p> <ul><li>توکن jwt در هدر مربوطه.</li> <li>هدر تعیین کننده نوع اطلاعات فرستاده شده به سرور (json)</li> <li>اطلاعات پست (به صورت json) شامل:
<ul><li>title</li> <li>body</li> <li>date</li></ul></li></ul></li> <li><p>این پست به endpoint گرفتن لیست پست‌ها ریکوئست می‌زنه، منتها با متد POST.</p></li> <li><p>وقتی پست جدید ثبت شد، ریسپانس سرور شامل همه اطلاعات پست خواهد بود. این پست رو بدون گرفتن لیست دوباره پست‌ها، به صفحه اضافه کن.</p></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">آخرین بروزرسانی:</span> <span class="time">۱۳۹۹/۹/۱۸،‏ ۱۹:۲۲:۵۵</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/frontend-course/course/advanced-react.html" class="prev">صفحه پست و کامنت‌ها</a></span> <span class="next"><a href="/frontend-course/course/state-management.html">مدیریت state</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/frontend-course/assets/js/app.73261c6b.js" defer></script><script src="/frontend-course/assets/js/2.3a14c9a1.js" defer></script><script src="/frontend-course/assets/js/12.5eaecadd.js" defer></script>
  </body>
</html>
